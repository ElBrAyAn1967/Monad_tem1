{
  "address": "0xE8Cf0B117E5115dce18B6F10554144D8d22435b6",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_server",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "from",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "FundsReceived",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "winner",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "PrizeSent",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "winner",
          "type": "address"
        }
      ],
      "name": "WinnerSet",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "getBalance",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "prizeClaimed",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "sendPrize",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "server",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_newServer",
          "type": "address"
        }
      ],
      "name": "setServer",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_winner",
          "type": "address"
        }
      ],
      "name": "setWinner",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "winner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "stateMutability": "payable",
      "type": "receive"
    }
  ],
  "transactionHash": "0x57918f09df9c64944a05c9db6cdc900aaed63ddb966ffff155cf7d2f4d7f47cb",
  "receipt": {
    "to": null,
    "from": "0xF94D57c784d2ca0b2E2Ba0C79dbA049A632A7449",
    "contractAddress": "0xE8Cf0B117E5115dce18B6F10554144D8d22435b6",
    "transactionIndex": 69,
    "gasUsed": "445567",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0xac3f08f9df44b310591586e80b76098a56a3c59c12ec3816d56b7da7796d147a",
    "transactionHash": "0x57918f09df9c64944a05c9db6cdc900aaed63ddb966ffff155cf7d2f4d7f47cb",
    "logs": [],
    "blockNumber": 30000246,
    "cumulativeGasUsed": "27935973",
    "status": 1,
    "byzantium": true
  },
  "args": [
    "0xF94D57c784d2ca0b2E2Ba0C79dbA049A632A7449"
  ],
  "numDeployments": 1,
  "solcInputHash": "d617a9e487100c1f601f868809fdd66f",
  "metadata": "{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_server\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"FundsReceived\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"winner\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"PrizeSent\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"winner\",\"type\":\"address\"}],\"name\":\"WinnerSet\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"getBalance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"prizeClaimed\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"sendPrize\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"server\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_newServer\",\"type\":\"address\"}],\"name\":\"setServer\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_winner\",\"type\":\"address\"}],\"name\":\"setWinner\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"winner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"stateMutability\":\"payable\",\"type\":\"receive\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/ServerLottery.sol\":\"ServerLottery\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"contracts/ServerLottery.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\r\\npragma solidity ^0.8.19;\\r\\ncontract ServerLottery {\\r\\n    address public owner;\\r\\n    address public server;\\r\\n    address public winner;\\r\\n    bool public prizeClaimed;\\r\\n    event FundsReceived(address from, uint256 amount);\\r\\n    event WinnerSet(address indexed winner);\\r\\n    event PrizeSent(address indexed winner, uint256 amount);\\r\\n    modifier onlyOwner() {\\r\\n        require(msg.sender == owner, \\\"Solo el owner\\\");\\r\\n        _;\\r\\n    }\\r\\n    modifier onlyServer() {\\r\\n        require(msg.sender == server, \\\"Solo el servidor autorizado\\\");\\r\\n        _;\\r\\n    }\\r\\n    constructor(address _server) {\\r\\n        owner = msg.sender;\\r\\n        server = _server;\\r\\n        prizeClaimed = false;\\r\\n    }\\r\\n    // Recibir fondos (por ejemplo, 0.06 ETH para premios)\\r\\n    receive() external payable {\\r\\n        emit FundsReceived(msg.sender, msg.value);\\r\\n    }\\r\\n    // El servidor designa al ganador\\r\\n    function setWinner(address _winner) external onlyServer {\\r\\n        require(_winner != address(0), \\\"Direccion invalida\\\");\\r\\n        require(!prizeClaimed, \\\"Premio ya fue reclamado\\\");\\r\\n        winner = _winner;\\r\\n        emit WinnerSet(_winner);\\r\\n    }\\r\\n    // Enviar todo el premio al ganador\\r\\n    function sendPrize() external {\\r\\n        require(msg.sender == winner, \\\"Solo el ganador puede reclamar\\\");\\r\\n        require(!prizeClaimed, \\\"Premio ya enviado\\\");\\r\\n        uint256 amount = address(this).balance;\\r\\n        require(amount > 0, \\\"Sin fondos\\\");\\r\\n        prizeClaimed = true;\\r\\n        (bool success, ) = winner.call{value: amount}(\\\"\\\");\\r\\n        require(success, \\\"Transferencia fallida\\\");\\r\\n        emit PrizeSent(winner, amount);\\r\\n    }\\r\\n    // Cambiar servidor si es necesario\\r\\n    function setServer(address _newServer) external onlyOwner {\\r\\n        require(_newServer != address(0), \\\"Direccion invalida\\\");\\r\\n        server = _newServer;\\r\\n    }\\r\\n    // Consultar balance\\r\\n    function getBalance() external view returns (uint256) {\\r\\n        return address(this).balance;\\r\\n    }\\r\\n}\",\"keccak256\":\"0xc1a7cfca2bbb0dd6e55e19172744178906a276ed516dda3c08146d67e53fccfc\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x608060405234801561001057600080fd5b506040516106d23803806106d283398101604081905261002f9161006f565b60008054336001600160a01b031991821617909155600180549091166001600160a01b03929092169190911790556002805460ff60a01b1916905561009f565b60006020828403121561008157600080fd5b81516001600160a01b038116811461009857600080fd5b9392505050565b610624806100ae6000396000f3fe60806040526004361061007f5760003560e01c8063d9fca7691161004e578063d9fca76914610163578063dfbf53ae14610183578063f19a0b54146101a3578063fd922a42146101c357600080fd5b806312065fe0146100c35780636ce3fc06146100e35780638da5cb5b146100fa5780639042bbf31461013257600080fd5b366100be57604080513381523460208201527f8e47b87b0ef542cdfa1659c551d88bad38aa7f452d2bbb349ab7530dfec8be8f910160405180910390a1005b600080fd5b3480156100cf57600080fd5b506040514781526020015b60405180910390f35b3480156100ef57600080fd5b506100f86101e3565b005b34801561010657600080fd5b5060005461011a906001600160a01b031681565b6040516001600160a01b0390911681526020016100da565b34801561013e57600080fd5b5060025461015390600160a01b900460ff1681565b60405190151581526020016100da565b34801561016f57600080fd5b506100f861017e3660046105be565b6103be565b34801561018f57600080fd5b5060025461011a906001600160a01b031681565b3480156101af57600080fd5b506100f86101be3660046105be565b610507565b3480156101cf57600080fd5b5060015461011a906001600160a01b031681565b6002546001600160a01b031633146102425760405162461bcd60e51b815260206004820152601e60248201527f536f6c6f20656c2067616e61646f72207075656465207265636c616d6172000060448201526064015b60405180910390fd5b600254600160a01b900460ff16156102905760405162461bcd60e51b81526020600482015260116024820152705072656d696f20796120656e766961646f60781b6044820152606401610239565b47806102cb5760405162461bcd60e51b815260206004820152600a60248201526953696e20666f6e646f7360b01b6044820152606401610239565b60028054600160a01b60ff60a01b198216179091556040516000916001600160a01b03169083908381818185875af1925050503d806000811461032a576040519150601f19603f3d011682016040523d82523d6000602084013e61032f565b606091505b50509050806103785760405162461bcd60e51b81526020600482015260156024820152745472616e73666572656e6369612066616c6c69646160581b6044820152606401610239565b6002546040518381526001600160a01b03909116907fe68f1c3aadf7db6bc78f334f4329ae41dd8001ba79bc90908f6ab59e23a651aa9060200160405180910390a25050565b6001546001600160a01b031633146104185760405162461bcd60e51b815260206004820152601b60248201527f536f6c6f20656c207365727669646f72206175746f72697a61646f00000000006044820152606401610239565b6001600160a01b0381166104635760405162461bcd60e51b8152602060048201526012602482015271446972656363696f6e20696e76616c69646160701b6044820152606401610239565b600254600160a01b900460ff16156104bd5760405162461bcd60e51b815260206004820152601760248201527f5072656d696f20796120667565207265636c616d61646f0000000000000000006044820152606401610239565b600280546001600160a01b0319166001600160a01b0383169081179091556040517f9d5b5758df7039aae25e6ca959e5d46a5b27446b5aaa5ae9880a09de7578207990600090a250565b6000546001600160a01b031633146105515760405162461bcd60e51b815260206004820152600d60248201526c29b7b6379032b61037bbb732b960991b6044820152606401610239565b6001600160a01b03811661059c5760405162461bcd60e51b8152602060048201526012602482015271446972656363696f6e20696e76616c69646160701b6044820152606401610239565b600180546001600160a01b0319166001600160a01b0392909216919091179055565b6000602082840312156105d057600080fd5b81356001600160a01b03811681146105e757600080fd5b939250505056fea2646970667358221220c1cb97d38cce6ee4281df447edf6b9311cad72dac425475f3576fe6fc47520ed64736f6c63430008140033",
  "deployedBytecode": "0x60806040526004361061007f5760003560e01c8063d9fca7691161004e578063d9fca76914610163578063dfbf53ae14610183578063f19a0b54146101a3578063fd922a42146101c357600080fd5b806312065fe0146100c35780636ce3fc06146100e35780638da5cb5b146100fa5780639042bbf31461013257600080fd5b366100be57604080513381523460208201527f8e47b87b0ef542cdfa1659c551d88bad38aa7f452d2bbb349ab7530dfec8be8f910160405180910390a1005b600080fd5b3480156100cf57600080fd5b506040514781526020015b60405180910390f35b3480156100ef57600080fd5b506100f86101e3565b005b34801561010657600080fd5b5060005461011a906001600160a01b031681565b6040516001600160a01b0390911681526020016100da565b34801561013e57600080fd5b5060025461015390600160a01b900460ff1681565b60405190151581526020016100da565b34801561016f57600080fd5b506100f861017e3660046105be565b6103be565b34801561018f57600080fd5b5060025461011a906001600160a01b031681565b3480156101af57600080fd5b506100f86101be3660046105be565b610507565b3480156101cf57600080fd5b5060015461011a906001600160a01b031681565b6002546001600160a01b031633146102425760405162461bcd60e51b815260206004820152601e60248201527f536f6c6f20656c2067616e61646f72207075656465207265636c616d6172000060448201526064015b60405180910390fd5b600254600160a01b900460ff16156102905760405162461bcd60e51b81526020600482015260116024820152705072656d696f20796120656e766961646f60781b6044820152606401610239565b47806102cb5760405162461bcd60e51b815260206004820152600a60248201526953696e20666f6e646f7360b01b6044820152606401610239565b60028054600160a01b60ff60a01b198216179091556040516000916001600160a01b03169083908381818185875af1925050503d806000811461032a576040519150601f19603f3d011682016040523d82523d6000602084013e61032f565b606091505b50509050806103785760405162461bcd60e51b81526020600482015260156024820152745472616e73666572656e6369612066616c6c69646160581b6044820152606401610239565b6002546040518381526001600160a01b03909116907fe68f1c3aadf7db6bc78f334f4329ae41dd8001ba79bc90908f6ab59e23a651aa9060200160405180910390a25050565b6001546001600160a01b031633146104185760405162461bcd60e51b815260206004820152601b60248201527f536f6c6f20656c207365727669646f72206175746f72697a61646f00000000006044820152606401610239565b6001600160a01b0381166104635760405162461bcd60e51b8152602060048201526012602482015271446972656363696f6e20696e76616c69646160701b6044820152606401610239565b600254600160a01b900460ff16156104bd5760405162461bcd60e51b815260206004820152601760248201527f5072656d696f20796120667565207265636c616d61646f0000000000000000006044820152606401610239565b600280546001600160a01b0319166001600160a01b0383169081179091556040517f9d5b5758df7039aae25e6ca959e5d46a5b27446b5aaa5ae9880a09de7578207990600090a250565b6000546001600160a01b031633146105515760405162461bcd60e51b815260206004820152600d60248201526c29b7b6379032b61037bbb732b960991b6044820152606401610239565b6001600160a01b03811661059c5760405162461bcd60e51b8152602060048201526012602482015271446972656363696f6e20696e76616c69646160701b6044820152606401610239565b600180546001600160a01b0319166001600160a01b0392909216919091179055565b6000602082840312156105d057600080fd5b81356001600160a01b03811681146105e757600080fd5b939250505056fea2646970667358221220c1cb97d38cce6ee4281df447edf6b9311cad72dac425475f3576fe6fc47520ed64736f6c63430008140033",
  "devdoc": {
    "kind": "dev",
    "methods": {},
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {},
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 3,
        "contract": "contracts/ServerLottery.sol:ServerLottery",
        "label": "owner",
        "offset": 0,
        "slot": "0",
        "type": "t_address"
      },
      {
        "astId": 5,
        "contract": "contracts/ServerLottery.sol:ServerLottery",
        "label": "server",
        "offset": 0,
        "slot": "1",
        "type": "t_address"
      },
      {
        "astId": 7,
        "contract": "contracts/ServerLottery.sol:ServerLottery",
        "label": "winner",
        "offset": 0,
        "slot": "2",
        "type": "t_address"
      },
      {
        "astId": 9,
        "contract": "contracts/ServerLottery.sol:ServerLottery",
        "label": "prizeClaimed",
        "offset": 20,
        "slot": "2",
        "type": "t_bool"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_bool": {
        "encoding": "inplace",
        "label": "bool",
        "numberOfBytes": "1"
      }
    }
  }
}